---
import PostPreview from '@/components/blog/PostPreview.astro';
import { getAllPosts, sortMDByDate } from '@/data/post';

const MAX_POSTS = 5;
const allPosts = await getAllPosts();
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS);
---

<section aria-label='Blog post list' class='mt-16'>
	<h2 class='title mb-4 text-xl'>Posts</h2>
	<ul class='space-y-4'>
		{
			allPostsByDate.map((p) => (
				<li class='grid gap-2 sm:grid-cols-[auto_1fr] sm:[&_q]:col-start-2'>
					{/* @ts-ignore-next-line - issue with -> @astrojs/check@0.9.3 */}
					<PostPreview post={p} />
				</li>
			))
		}
	</ul>
</section>